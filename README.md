# CSYE7125 Helm charts for EKS Cluster Autoscaler

This repository contains the Helm charts for deploying the Cluster Autoscaler on EKS.

## Helm Installation

Please follow the installation instructions required for setting up the project [here](INSTALLATION.md).

## Usage

Override the values.yaml with your custom values and run the following command to install the chart.

```bash
helm install <release-name> .
```

## Values

| Key                                                                 | Type   | Default                                                                                                     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ------------------------------------------------------------------- | ------ | ----------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| cluster-autoscaler.additionalLabels                                 | object | `{}`                                                                                                        | Labels to add to each object of the chart.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| cluster-autoscaler.affinity                                         | object | `{}`                                                                                                        | Affinity for pod assignment                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.autoDiscovery.clusterName                        | string | `dev-eks-cluster-vpc`                                                                                       | Enable autodiscovery for `cloudProvider=aws`, for groups matching `autoDiscovery.tags`. autoDiscovery.clusterName -- Enable autodiscovery for `cloudProvider=azure`, using tags defined in https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/azure/README.md#auto-discovery-setup. Enable autodiscovery for `cloudProvider=clusterapi`, for groups matching `autoDiscovery.labels`. Enable autodiscovery for `cloudProvider=gce`, but no MIG tagging required. Enable autodiscovery for `cloudProvider=magnum`, for groups matching `autoDiscovery.roles`.                                                   |
| cluster-autoscaler.autoDiscovery.labels                             | list   | `[]`                                                                                                        | Cluster-API labels to match  https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/clusterapi/README.md#configuring-node-group-auto-discovery                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| cluster-autoscaler.autoDiscovery.namespace                          | string | `cluster-autoscaler`                                                                                        | Enable autodiscovery via cluster namespace for for `cloudProvider=clusterapi`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| cluster-autoscaler.autoDiscovery.roles                              | list   | `["worker"]`                                                                                                | Magnum node group roles to match.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.autoDiscovery.tags                               | list   | `["k8s.io/cluster-autoscaler/enabled","k8s.io/cluster-autoscaler/{{ .Values.autoDiscovery.clusterName }}"]` | ASG tags to match, run through `tpl`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| cluster-autoscaler.autoscalingGroups                                | list   | `[]`                                                                                                        | For AWS, Azure AKS or Magnum. At least one element is required if not using `autoDiscovery`. For example: <pre> - name: asg1<br />   maxSize: 2<br />   minSize: 1 </pre> For Hetzner Cloud, the `instanceType` and `region` keys are also required. <pre> - name: mypool<br />   maxSize: 2<br />   minSize: 1<br />   instanceType: CPX21<br />   region: FSN1 </pre>                                                                                                                                                                                                                                                                          |
| cluster-autoscaler.autoscalingGroupsnamePrefix                      | list   | `[]`                                                                                                        | For GCE. At least one element is required if not using `autoDiscovery`. For example: <pre> - name: ig01<br />   maxSize: 10<br />   minSize: 0 </pre>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| cluster-autoscaler.awsAccessKeyID                                   | string | `""`                                                                                                        | AWS access key ID ([if AWS user keys used](https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md#using-aws-credentials))                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.awsRegion                                        | string | `"us-east-1"`                                                                                               | AWS region (required if `cloudProvider=aws`)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| cluster-autoscaler.awsSecretAccessKey                               | string | `""`                                                                                                        | AWS access secret key ([if AWS user keys used](https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/aws/README.md#using-aws-credentials))                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| cluster-autoscaler.azureClientID                                    | string | `""`                                                                                                        | Service Principal ClientID with contributor permission to Cluster and Node ResourceGroup. Required if `cloudProvider=azure`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.azureClientSecret                                | string | `""`                                                                                                        | Service Principal ClientSecret with contributor permission to Cluster and Node ResourceGroup. Required if `cloudProvider=azure`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| cluster-autoscaler.azureEnableForceDelete                           | bool   | `false`                                                                                                     | Whether to force delete VMs or VMSS instances when scaling down.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.azureResourceGroup                               | string | `""`                                                                                                        | Azure resource group that the cluster is located. Required if `cloudProvider=azure`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| cluster-autoscaler.azureSubscriptionID                              | string | `""`                                                                                                        | Azure subscription where the resources are located. Required if `cloudProvider=azure`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| cluster-autoscaler.azureTenantID                                    | string | `""`                                                                                                        | Azure tenant where the resources are located. Required if `cloudProvider=azure`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| cluster-autoscaler.azureUseManagedIdentityExtension                 | bool   | `false`                                                                                                     | Whether to use Azure's managed identity extension for credentials. If using MSI, ensure subscription ID, resource group, and azure AKS cluster name are set. You can only use one authentication method at a time, either azureUseWorkloadIdentityExtension or azureUseManagedIdentityExtension should be set.                                                                                                                                                                                                                                                                                                                                   |
| cluster-autoscaler.azureUseWorkloadIdentityExtension                | bool   | `false`                                                                                                     | Whether to use Azure's workload identity extension for credentials. See the project here: https://github.com/Azure/azure-workload-identity for more details. You can only use one authentication method at a time, either azureUseWorkloadIdentityExtension or azureUseManagedIdentityExtension should be set.                                                                                                                                                                                                                                                                                                                                   |
| cluster-autoscaler.azureVMType                                      | string | `"vmss"`                                                                                                    | Azure VM type.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| cluster-autoscaler.cloudConfigPath                                  | string | `""`                                                                                                        | Configuration file for cloud provider.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.cloudProvider                                    | string | `"aws"`                                                                                                     | The cloud provider where the autoscaler runs. Currently only `gce`, `aws`, `azure`, `magnum` and `clusterapi` are supported. `aws` supported for AWS. `gce` for GCE. `azure` for Azure AKS. `magnum` for OpenStack Magnum, `clusterapi` for Cluster API.                                                                                                                                                                                                                                                                                                                                                                                         |
| cluster-autoscaler.clusterAPICloudConfigPath                        | string | `"/etc/kubernetes/mgmt-kubeconfig"`                                                                         | Path to kubeconfig for connecting to Cluster API Management Cluster, only used if `clusterAPIMode=kubeconfig-kubeconfig or incluster-kubeconfig`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.clusterAPIConfigMapsNamespace                    | string | `""`                                                                                                        | Namespace on the workload cluster to store Leader election and status configmaps                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.clusterAPIKubeconfigSecret                       | string | `""`                                                                                                        | Secret containing kubeconfig for connecting to Cluster API managed workloadcluster Required if `cloudProvider=clusterapi` and `clusterAPIMode=kubeconfig-kubeconfig,kubeconfig-incluster or incluster-kubeconfig`                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.clusterAPIMode                                   | string | `"incluster-incluster"`                                                                                     | Cluster API mode, see https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/cloudprovider/clusterapi/README.md#connecting-cluster-autoscaler-to-cluster-api-management-and-workload-clusters Syntax: workloadClusterMode-ManagementClusterMode for `kubeconfig-kubeconfig`, `incluster-kubeconfig` and `single-kubeconfig` you always must mount the external kubeconfig using either `extraVolumeSecrets` or `extraMounts` and `extraVolumes` if you dont set `clusterAPIKubeconfigSecret`and thus use an in-cluster config or want to use a non capi generated kubeconfig you must do so for the workload kubeconfig as well |
| cluster-autoscaler.clusterAPIWorkloadKubeconfigPath                 | string | `"/etc/kubernetes/value"`                                                                                   | Path to kubeconfig for connecting to Cluster API managed workloadcluster, only used if `clusterAPIMode=kubeconfig-kubeconfig or kubeconfig-incluster`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| cluster-autoscaler.containerSecurityContext                         | object | `{}`                                                                                                        | [Security context for container](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| cluster-autoscaler.deployment.annotations                           | object | `{}`                                                                                                        | Annotations to add to the Deployment object.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| cluster-autoscaler.dnsPolicy                                        | string | `"ClusterFirst"`                                                                                            | Defaults to `ClusterFirst`. Valid values are: `ClusterFirstWithHostNet`, `ClusterFirst`, `Default` or `None`. If autoscaler does not depend on cluster DNS, recommended to set this to `Default`.                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.envFromConfigMap                                 | string | `""`                                                                                                        | ConfigMap name to use as envFrom.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.envFromSecret                                    | string | `""`                                                                                                        | Secret name to use as envFrom.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| cluster-autoscaler.expanderPriorities                               | object | `{}`                                                                                                        | The expanderPriorities is used if `extraArgs.expander` contains `priority` and expanderPriorities is also set with the priorities. If `extraArgs.expander` contains `priority`, then expanderPriorities is used to define cluster-autoscaler-priority-expander priorities. See: https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/expander/priority/readme.md                                                                                                                                                                                                                                                              |
| cluster-autoscaler.extraArgs                                        | object | `{"logtostderr":true,"stderrthreshold":"info","v":4}`                                                       | Additional container arguments. Refer to https://github.com/kubernetes/autoscaler/blob/master/cluster-autoscaler/FAQ.md#what-are-the-parameters-to-ca for the full list of cluster autoscaler parameters and their default values. Everything after the first _ will be ignored allowing the use of multi-string arguments.                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.extraEnv                                         | object | `{}`                                                                                                        | Additional container environment variables.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.extraEnvConfigMaps                               | object | `{}`                                                                                                        | Additional container environment variables from ConfigMaps.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.extraEnvSecrets                                  | object | `{}`                                                                                                        | Additional container environment variables from Secrets.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| cluster-autoscaler.extraVolumeMounts                                | list   | `Refer 'values.yaml'`                                                                                       | Additional volumes to mount.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| cluster-autoscaler.extraVolumeSecrets                               | object | `{}`                                                                                                        | Additional volumes to mount from Secrets.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| cluster-autoscaler.extraVolumes                                     | list   | `Refer 'values.yaml'`                                                                                       | Additional volumes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| cluster-autoscaler.fullnameOverride                                 | string | `""`                                                                                                        | String to fully override `cluster-autoscaler.fullname` template.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.hostNetwork                                      | bool   | `false`                                                                                                     | Whether to expose network interfaces of the host machine to pods.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.image.pullPolicy                                 | string | `"IfNotPresent"`                                                                                            | Image pull policy                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.image.pullSecrets                                | list   | `[]`                                                                                                        | Image pull secrets                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| cluster-autoscaler.image.repository                                 | string | `"marlapativ/cluster-autoscaler"`                                                                           | Image repository                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.image.tag                                        | string | `"v1.30.0"`                                                                                                 | Image tag                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| cluster-autoscaler.kubeTargetVersionOverride                        | string | `""`                                                                                                        | Allow overriding the `.Capabilities.KubeVersion.GitVersion` check. Useful for `helm template` commands.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| cluster-autoscaler.kwokConfigMapName                                | string | `"kwok-provider-config"`                                                                                    | configmap for configuring kwok provider                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| cluster-autoscaler.magnumCABundlePath                               | string | `"/etc/kubernetes/ca-bundle.crt"`                                                                           | Path to the host's CA bundle, from `ca-file` in the cloud-config file.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.magnumClusterName                                | string | `""`                                                                                                        | Cluster name or ID in Magnum. Required if `cloudProvider=magnum` and not setting `autoDiscovery.clusterName`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| cluster-autoscaler.nameOverride                                     | string | `""`                                                                                                        | String to partially override `cluster-autoscaler.fullname` template (will maintain the release name)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| cluster-autoscaler.nodeSelector                                     | object | `{}`                                                                                                        | Node labels for pod assignment. Ref: https://kubernetes.io/docs/user-guide/node-selection/.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.podAnnotations                                   | object | `{}`                                                                                                        | Annotations to add to each pod.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| cluster-autoscaler.podDisruptionBudget                              | object | `{"maxUnavailable":1}`                                                                                      | Pod disruption budget.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.podLabels                                        | object | `{}`                                                                                                        | Labels to add to each pod.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| cluster-autoscaler.priorityClassName                                | string | `"system-cluster-critical"`                                                                                 | priorityClassName                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.priorityConfigMapAnnotations                     | object | `{}`                                                                                                        | Annotations to add to `cluster-autoscaler-priority-expander` ConfigMap.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| cluster-autoscaler.prometheusRule.additionalLabels                  | object | `{}`                                                                                                        | Additional labels to be set in metadata.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| cluster-autoscaler.prometheusRule.enabled                           | bool   | `false`                                                                                                     | If true, creates a Prometheus Operator PrometheusRule.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.prometheusRule.interval                          | string | `nil`                                                                                                       | How often rules in the group are evaluated (falls back to `global.evaluation_interval` if not set).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| cluster-autoscaler.prometheusRule.namespace                         | string | `"monitoring"`                                                                                              | Namespace which Prometheus is running in.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| cluster-autoscaler.prometheusRule.rules                             | list   | `[]`                                                                                                        | Rules spec template (see https://github.com/prometheus-operator/prometheus-operator/blob/master/Documentation/api.md#rule).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.rbac.clusterScoped                               | bool   | `true`                                                                                                      | if set to false will only provision RBAC to alter resources in the current namespace. Most useful for Cluster-API                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.rbac.create                                      | bool   | `true`                                                                                                      | If `true`, create and use RBAC resources.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| cluster-autoscaler.rbac.pspEnabled                                  | bool   | `false`                                                                                                     | If `true`, creates and uses RBAC resources required in the cluster with [Pod Security Policies](https://kubernetes.io/docs/concepts/policy/pod-security-policy/) enabled. Must be used with `rbac.create` set to `true`.                                                                                                                                                                                                                                                                                                                                                                                                                         |
| cluster-autoscaler.rbac.serviceAccount.annotations                  | object | `{}`                                                                                                        | Additional Service Account annotations.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| cluster-autoscaler.rbac.serviceAccount.automountServiceAccountToken | bool   | `true`                                                                                                      | Automount API credentials for a Service Account.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.rbac.serviceAccount.create                       | bool   | `true`                                                                                                      | If `true` and `rbac.create` is also true, a Service Account will be created.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| cluster-autoscaler.rbac.serviceAccount.name                         | string | `"cluster-autoscaler"`                                                                                      | The name of the ServiceAccount to use. If not set and create is `true`, a name is generated using the fullname template.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| cluster-autoscaler.replicaCount                                     | int    | `1`                                                                                                         | Desired number of pods                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.resources                                        | object | `{}`                                                                                                        | Pod resource requests and limits.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| cluster-autoscaler.revisionHistoryLimit                             | int    | `10`                                                                                                        | The number of revisions to keep.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.secretKeyRefNameOverride                         | string | `""`                                                                                                        | Overrides the name of the Secret to use when loading the secretKeyRef for AWS and Azure env variables                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| cluster-autoscaler.securityContext                                  | object | `{}`                                                                                                        | [Security context for pod](https://kubernetes.io/docs/tasks/configure-pod-container/security-context/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.service.annotations                              | object | `{}`                                                                                                        | Annotations to add to service                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| cluster-autoscaler.service.create                                   | bool   | `true`                                                                                                      | If `true`, a Service will be created.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| cluster-autoscaler.service.externalIPs                              | list   | `[]`                                                                                                        | List of IP addresses at which the service is available. Ref: https://kubernetes.io/docs/user-guide/services/#external-ips.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| cluster-autoscaler.service.labels                                   | object | `{}`                                                                                                        | Labels to add to service                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| cluster-autoscaler.service.loadBalancerIP                           | string | `""`                                                                                                        | IP address to assign to load balancer (if supported).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| cluster-autoscaler.service.loadBalancerSourceRanges                 | list   | `[]`                                                                                                        | List of IP CIDRs allowed access to load balancer (if supported).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.service.portName                                 | string | `"http"`                                                                                                    | Name for service port.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.service.servicePort                              | int    | `8085`                                                                                                      | Service port to expose.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| cluster-autoscaler.service.type                                     | string | `"ClusterIP"`                                                                                               | Type of service to create.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| cluster-autoscaler.serviceMonitor.annotations                       | object | `{}`                                                                                                        | Annotations to add to service monitor                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| cluster-autoscaler.serviceMonitor.enabled                           | bool   | `false`                                                                                                     | If true, creates a Prometheus Operator ServiceMonitor.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| cluster-autoscaler.serviceMonitor.interval                          | string | `"10s"`                                                                                                     | Interval that Prometheus scrapes Cluster Autoscaler metrics.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| cluster-autoscaler.serviceMonitor.metricRelabelings                 | object | `{}`                                                                                                        | MetricRelabelConfigs to apply to samples before ingestion.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| cluster-autoscaler.serviceMonitor.namespace                         | string | `"monitoring"`                                                                                              | Namespace which Prometheus is running in.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| cluster-autoscaler.serviceMonitor.path                              | string | `"/metrics"`                                                                                                | The path to scrape for metrics; autoscaler exposes `/metrics` (this is standard)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cluster-autoscaler.serviceMonitor.selector                          | object | `{"release":"prometheus-operator"}`                                                                         | Default to kube-prometheus install (CoreOS recommended), but should be set according to Prometheus install.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.tolerations                                      | list   | `[]`                                                                                                        | List of node taints to tolerate (requires Kubernetes >= 1.6).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| cluster-autoscaler.topologySpreadConstraints                        | list   | `[]`                                                                                                        | You can use topology spread constraints to control how Pods are spread across your cluster among failure-domains such as regions, zones, nodes, and other user-defined topology domains. (requires Kubernetes >= 1.19).                                                                                                                                                                                                                                                                                                                                                                                                                          |
| cluster-autoscaler.updateStrategy                                   | object | `{}`                                                                                                        | [Deployment update strategy](https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#strategy)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| cluster-autoscaler.vpa                                              | object | `{"containerPolicy":{},"enabled":false,"updateMode":"Auto"}`                                                | Configure a VerticalPodAutoscaler for the cluster-autoscaler Deployment.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| cluster-autoscaler.vpa.containerPolicy                              | object | `{}`                                                                                                        | [ContainerResourcePolicy](https://github.com/kubernetes/autoscaler/blob/vertical-pod-autoscaler/v0.13.0/vertical-pod-autoscaler/pkg/apis/autoscaling.k8s.io/v1/types.go#L159). The containerName is always et to the deployment's container name. This value is required if VPA is enabled.                                                                                                                                                                                                                                                                                                                                                      |
| cluster-autoscaler.vpa.enabled                                      | bool   | `false`                                                                                                     | If true, creates a VerticalPodAutoscaler.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| cluster-autoscaler.vpa.updateMode                                   | string | `"Auto"`                                                                                                    | [UpdateMode](https://github.com/kubernetes/autoscaler/blob/vertical-pod-autoscaler/v0.13.0/vertical-pod-autoscaler/pkg/apis/autoscaling.k8s.io/v1/types.go#L124)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
